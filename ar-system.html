<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ - æ¸©æ³‰æ—…é¤¨</title>
    
    <!-- AR.js & A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.min.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: 'Noto Sans JP', sans-serif;
            overflow: hidden;
        }
        
        /* UI ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .ui-element {
            pointer-events: auto;
        }
        
        /* ãƒˆãƒƒãƒ—ãƒãƒ¼ */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            z-index: 1001;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« */
        .control-panel {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 20px;
            display: flex;
            gap: 10px;
            backdrop-filter: blur(10px);
        }
        
        .control-button {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 12px 16px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
        }
        
        .control-button:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .control-button.active {
            background: #4CAF50;
        }
        
        /* ç›®çš„åœ°é¸æŠãƒ‘ãƒãƒ« */
        .destination-panel {
            position: fixed;
            top: 60px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 15px;
            color: white;
            max-width: 250px;
            backdrop-filter: blur(10px);
        }
        
        .destination-button {
            display: block;
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }
        
        .destination-button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }
        
        /* æƒ…å ±ãƒ‘ãƒãƒ« */
        .info-panel {
            position: fixed;
            bottom: 120px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 15px;
            color: white;
            max-width: 200px;
            backdrop-filter: blur(10px);
        }
        
        .distance-info {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .direction-arrow {
            font-size: 24px;
            margin: 10px 0;
            text-align: center;
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 2000;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .loading-progress {
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .destination-panel {
                right: 10px;
                max-width: 200px;
            }
            
            .info-panel {
                left: 10px;
                max-width: 150px;
            }
            
            .control-panel {
                bottom: 10px;
            }
        }
        
        /* ã‚¨ãƒ©ãƒ¼è¡¨ç¤º */
        .error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(244, 67, 54, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 2001;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">ARã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...</div>
        <div id="loading-progress" class="loading-progress">ã‚»ãƒ³ã‚µãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™</div>
    </div>
    
    <!-- AR Scene -->
    <a-scene
        id="ar-scene"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">
        
        <!-- ã‚«ãƒ¡ãƒ© -->
        <a-camera
            id="ar-camera"
            gps-camera
            rotation-reader
            look-controls-enabled="false"
            arjs-look-controls="smoothingFactor: 0.1"
            position="0 0 0">
        </a-camera>
        
        <!-- ãƒ©ã‚¤ãƒˆè¨­å®š -->
        <a-light type="ambient" color="#404040"></a-light>
        <a-light type="directional" position="0 10 0" color="#ffffff"></a-light>
        
        <!-- ARãƒãƒ¼ã‚«ãƒ¼ï¼ˆãƒ•ãƒ­ã‚¢åˆ¤å®šç”¨ï¼‰ -->
        <a-marker
            id="floor-marker"
            type="pattern"
            url="data:image/png;base64,..."
            smooth="true"
            smoothCount="10"
            smoothTolerance="0.01"
            smoothThreshold="5">
            <a-text
                value="1F ã‚¨ãƒ³ãƒˆãƒ©ãƒ³ã‚¹"
                position="0 0.5 0"
                align="center"
                color="#000000">
            </a-text>
        </a-marker>
        
        <!-- å‹•çš„ç”Ÿæˆã•ã‚Œã‚‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´  -->
        <a-entity id="navigation-elements"></a-entity>
        
        <!-- ç›®çš„åœ°ãƒãƒ¼ã‚«ãƒ¼ -->
        <a-entity id="destination-markers"></a-entity>
        
        <!-- çµŒè·¯è¡¨ç¤º -->
        <a-entity id="route-display"></a-entity>
    </a-scene>
    
    <!-- UI ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="ui-overlay">
        <!-- ãƒˆãƒƒãƒ—ãƒãƒ¼ -->
        <div class="top-bar ui-element">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span id="status-text">ã‚·ã‚¹ãƒ†ãƒ æº–å‚™ä¸­</span>
            </div>
            <div>
                <button class="control-button" onclick="toggleLanguage()">ğŸŒ</button>
                <button class="control-button" onclick="goHome()">ğŸ </button>
            </div>
        </div>
        
        <!-- ç›®çš„åœ°é¸æŠãƒ‘ãƒãƒ« -->
        <div id="destination-panel" class="destination-panel ui-element">
            <h3 style="margin-top: 0;">ç›®çš„åœ°ã‚’é¸æŠ</h3>
            <button class="destination-button" onclick="navigateTo('reception')">
                ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆãƒ»å—ä»˜
            </button>
            <button class="destination-button" onclick="navigateTo('onsen')">
                â™¨ï¸ å¤§æµ´å ´ãƒ»æ¸©æ³‰
            </button>
            <button class="destination-button" onclick="navigateTo('restaurant')">
                ğŸ½ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ãƒ»é£Ÿäº‹å‡¦
            </button>
            <button class="destination-button" onclick="navigateTo('elevator')">
                ğŸ›— ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼
            </button>
            <button class="destination-button" onclick="navigateTo('toilet')">
                ğŸš» ãŠæ‰‹æ´—ã„
            </button>
            <button class="destination-button" onclick="navigateTo('shop')">
                ğŸ›ï¸ å£²åº—ãƒ»ãŠåœŸç”£
            </button>
            <button class="destination-button" onclick="navigateTo('lounge')">
                ğŸ›‹ï¸ ãƒ©ã‚¦ãƒ³ã‚¸ãƒ»ä¼‘æ†©æ‰€
            </button>
            <button class="destination-button" onclick="navigateTo('parking')">
                ğŸš— é§è»Šå ´
            </button>
        </div>
        
        <!-- æƒ…å ±ãƒ‘ãƒãƒ« -->
        <div id="info-panel" class="info-panel ui-element">
            <div class="distance-info">
                è·é›¢: <span id="distance-display">--m</span>
            </div>
            <div class="distance-info">
                åˆ°ç€äºˆå®š: <span id="eta-display">--åˆ†</span>
            </div>
            <div class="direction-arrow" id="direction-arrow">ğŸ§­</div>
            <div style="font-size: 12px; opacity: 0.8;">
                ãƒ•ãƒ­ã‚¢: <span id="floor-display">--</span>
            </div>
        </div>
        
        <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« */
        <div class="control-panel ui-element">
            <button class="control-button" onclick="toggleVoice()" id="voice-btn">ğŸ”Š</button>
            <button class="control-button" onclick="toggleVibration()" id="vibration-btn">ğŸ“³</button>
            <button class="control-button" onclick="recalibrate()">ğŸ“</button>
            <button class="control-button" onclick="showHelp()">â“</button>
        </div>
    </div>
    
    <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <div id="error-message" class="error-message hidden">
        <h3>âš ï¸ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3>
        <p id="error-text"></p>
        <button onclick="hideError()" style="background: white; color: #f44336; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">é–‰ã˜ã‚‹</button>
    </div>
    
    <!-- JavaScriptèª­ã¿è¾¼ã¿ -->
    <script src="js/sensors.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/translation.js"></script>
    <script src="js/floor-detection.js"></script>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let arSystem = null;
        let currentLanguage = 'ja';
        let isVoiceEnabled = true;
        let isVibrationEnabled = true;
        let currentDestination = null;
        
        // ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                await initializeARSystem();
            } catch (error) {
                console.error('ARåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                showError('ARã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            }
        });
        
        // ARã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
        async function initializeARSystem() {
            updateLoadingProgress('ä½ç½®æƒ…å ±ã®è¨±å¯ã‚’ç¢ºèªä¸­...');
            
            // ä½ç½®æƒ…å ±è¨±å¯
            if (!navigator.geolocation) {
                throw new Error('ä½ç½®æƒ…å ±ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“');
            }
            
            updateLoadingProgress('ã‚»ãƒ³ã‚µãƒ¼ã‚’åˆæœŸåŒ–ä¸­...');
            
            // ã‚»ãƒ³ã‚µãƒ¼åˆæœŸåŒ–
            const sensorManager = new SensorManager();
            await sensorManager.initialize();
            
            updateLoadingProgress('ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’æº–å‚™ä¸­...');
            
            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            const navigationSystem = new NavigationSystem();
            await navigationSystem.initialize();
            
            updateLoadingProgress('å¤šè¨€èªã‚·ã‚¹ãƒ†ãƒ ã‚’æº–å‚™ä¸­...');
            
            // ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            const translationManager = new TranslationManager();
            await translationManager.initialize();
            
            updateLoadingProgress('ãƒ•ãƒ­ã‚¢æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ã‚’æº–å‚™ä¸­...');
            
            // ãƒ•ãƒ­ã‚¢æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            const floorDetection = new FloorDetectionSystem();
            await floorDetection.initialize();
            
            updateLoadingProgress('ARã‚·ãƒ¼ãƒ³ã‚’æ§‹ç¯‰ä¸­...');
            
            // ARã‚·ãƒ¼ãƒ³æº–å‚™
            await setupARScene();
            
            updateLoadingProgress('å®Œäº†');
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’éš ã™
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
                document.getElementById('status-text').textContent = 'ARæº–å‚™å®Œäº†';
                startARNavigation();
            }, 1000);
        }
        
        // AR Scene setup
        async function setupARScene() {
            const scene = document.getElementById('ar-scene');
            
            // ã‚«ãƒ¡ãƒ©ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            const camera = document.getElementById('ar-camera');
            camera.addEventListener('componentchanged', function(evt) {
                if (evt.detail.name === 'rotation') {
                    updateNavigationDisplay();
                }
            });
        }
        
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
        function startARNavigation() {
            console.log('ARãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹');
            // å®šæœŸçš„ãªä½ç½®æ›´æ–°
            setInterval(updatePosition, 1000);
            setInterval(updateNavigationDisplay, 500);
        }
        
        // ä½ç½®æ›´æ–°
        function updatePosition() {
            navigator.geolocation.getCurrentPosition(
                position => {
                    const coords = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude,
                        accuracy: position.coords.accuracy
                    };
                    
                    // ä½ç½®æƒ…å ±ã‚’ä½¿ã£ãŸå‡¦ç†
                    if (currentDestination) {
                        updateNavigationInfo(coords);
                    }
                },
                error => {
                    console.error('ä½ç½®å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                }
            );
        }
        
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±æ›´æ–°
        function updateNavigationInfo(position) {
            // è·é›¢è¨ˆç®—ã¨è¡¨ç¤ºæ›´æ–°
            const distance = calculateDistance(position, currentDestination);
            document.getElementById('distance-display').textContent = `${Math.round(distance)}m`;
            
            // åˆ°ç€äºˆå®šæ™‚é–“
            const eta = Math.ceil(distance / 60); // 1åˆ†60mæƒ³å®š
            document.getElementById('eta-display').textContent = `${eta}åˆ†`;
            
            // æ–¹å‘çŸ¢å°æ›´æ–°
            const direction = calculateDirection(position, currentDestination);
            updateDirectionArrow(direction);
        }
        
        // ç›®çš„åœ°ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        function navigateTo(destination) {
            currentDestination = destination;
            console.log('ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹:', destination);
            
            // éŸ³å£°æ¡ˆå†…
            if (isVoiceEnabled) {
                const message = getNavigationMessage(destination);
                speak(message);
            }
            
            // ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            if (isVibrationEnabled && 'vibrate' in navigator) {
                navigator.vibrate([100, 50, 100]);
            }
            
            // ARè¡¨ç¤ºæ›´æ–°
            updateARDisplay(destination);
        }
        
        // ARè¡¨ç¤ºæ›´æ–°
        function updateARDisplay(destination) {
            const scene = document.getElementById('ar-scene');
            const navElements = document.getElementById('navigation-elements');
            
            // æ—¢å­˜ã®è¦ç´ ã‚’ã‚¯ãƒªã‚¢
            while (navElements.firstChild) {
                navElements.removeChild(navElements.firstChild);
            }
            
            // ç›®çš„åœ°ãƒãƒ¼ã‚«ãƒ¼è¿½åŠ 
            const marker = document.createElement('a-sphere');
            marker.setAttribute('position', '0 2 -5');
            marker.setAttribute('radius', '0.5');
            marker.setAttribute('color', '#ff6b6b');
            marker.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 4000');
            
            const text = document.createElement('a-text');
            text.setAttribute('value', getDestinationName(destination));
            text.setAttribute('position', '0 3 -5');
            text.setAttribute('align', 'center');
            text.setAttribute('color', '#ffffff');
            text.setAttribute('scale', '2 2 2');
            
            navElements.appendChild(marker);
            navElements.appendChild(text);
        }
        
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function updateLoadingProgress(message) {
            document.getElementById('loading-progress').textContent = message;
        }
        
        function updateNavigationDisplay() {
            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã®æ›´æ–°å‡¦ç†
        }
        
        function calculateDistance(pos1, pos2) {
            // è·é›¢è¨ˆç®—ï¼ˆç°¡ç•¥åŒ–ï¼‰
            return Math.random() * 50 + 10; // ãƒ‡ãƒ¢ç”¨
        }
        
        function calculateDirection(pos1, pos2) {
            // æ–¹å‘è¨ˆç®—ï¼ˆç°¡ç•¥åŒ–ï¼‰
            return Math.random() * 360; // ãƒ‡ãƒ¢ç”¨
        }
        
        function updateDirectionArrow(direction) {
            const arrows = ['â¬†ï¸', 'â†—ï¸', 'â¡ï¸', 'â†˜ï¸', 'â¬‡ï¸', 'â†™ï¸', 'â¬…ï¸', 'â†–ï¸'];
            const index = Math.floor(direction / 45) % 8;
            document.getElementById('direction-arrow').textContent = arrows[index];
        }
        
        function getNavigationMessage(destination) {
            const messages = {
                'reception': 'ãƒ•ãƒ­ãƒ³ãƒˆãƒ»å—ä»˜ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'onsen': 'å¤§æµ´å ´ãƒ»æ¸©æ³‰ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'restaurant': 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ãƒ»é£Ÿäº‹å‡¦ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'elevator': 'ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'toilet': 'ãŠæ‰‹æ´—ã„ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'shop': 'å£²åº—ãƒ»ãŠåœŸç”£ã‚³ãƒ¼ãƒŠãƒ¼ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'lounge': 'ãƒ©ã‚¦ãƒ³ã‚¸ãƒ»ä¼‘æ†©æ‰€ã¸ã”æ¡ˆå†…ã—ã¾ã™',
                'parking': 'é§è»Šå ´ã¸ã”æ¡ˆå†…ã—ã¾ã™'
            };
            return messages[destination] || 'ç›®çš„åœ°ã¸ã”æ¡ˆå†…ã—ã¾ã™';
        }
        
        function getDestinationName(destination) {
            const names = {
                'reception': 'ãƒ•ãƒ­ãƒ³ãƒˆ',
                'onsen': 'å¤§æµ´å ´',
                'restaurant': 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³',
                'elevator': 'ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼',
                'toilet': 'ãŠæ‰‹æ´—ã„',
                'shop': 'å£²åº—',
                'lounge': 'ãƒ©ã‚¦ãƒ³ã‚¸',
                'parking': 'é§è»Šå ´'
            };
            return names[destination] || 'ç›®çš„åœ°';
        }
        
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = currentLanguage === 'ja' ? 'ja-JP' : 'en-US';
                speechSynthesis.speak(utterance);
            }
        }
        
        function showError(message) {
            document.getElementById('error-text').textContent = message;
            document.getElementById('error-message').classList.remove('hidden');
        }
        
        function hideError() {
            document.getElementById('error-message').classList.add('hidden');
        }
        
        // UIæ“ä½œé–¢æ•°
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'ja' ? 'en' : 'ja';
            console.log('è¨€èªåˆ‡æ›¿:', currentLanguage);
        }
        
        function toggleVoice() {
            isVoiceEnabled = !isVoiceEnabled;
            const btn = document.getElementById('voice-btn');
            btn.classList.toggle('active', isVoiceEnabled);
            btn.textContent = isVoiceEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
        }
        
        function toggleVibration() {
            isVibrationEnabled = !isVibrationEnabled;
            const btn = document.getElementById('vibration-btn');
            btn.classList.toggle('active', isVibrationEnabled);
            btn.textContent = isVibrationEnabled ? 'ğŸ“³' : 'ğŸ“´';
        }
        
        function recalibrate() {
            console.log('ä½ç½®å†æ ¡æ­£');
            if ('vibrate' in navigator) {
                navigator.vibrate(200);
            }
        }
        
        function showHelp() {
            alert('ARãƒŠãƒ“ã®ä½¿ã„æ–¹:\n\n1. ã‚¹ãƒãƒ›ã‚’ã‹ã–ã—ã¦ARç”»é¢ã‚’ç¢ºèª\n2. ç›®çš„åœ°ã‚’é¸æŠ\n3. ç”»é¢ã®çŸ¢å°ã«å¾“ã£ã¦ç§»å‹•\n4. éŸ³å£°æ¡ˆå†…ã‚’èããªãŒã‚‰é€²ã‚€\n\nå›°ã£ãŸæ™‚ã¯é¤¨å†…ã‚¹ã‚¿ãƒƒãƒ•ã«ãŠå£°ãŒã‘ãã ã•ã„ã€‚');
        }
        
        function goHome() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
